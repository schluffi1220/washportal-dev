<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Datenschutz – Washportal</title>
<style>
  :root{--bg0:#07131f;--bg1:#0b1b2b;--card:rgba(255,255,255,.06);--stroke:rgba(255,255,255,.10);--txt:#e8f1ff;--muted:rgba(232,241,255,.70);--r:18px;}
  *{box-sizing:border-box}
  body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica,Arial;color:var(--txt);
    background: radial-gradient(1200px 700px at 20% 15%, rgba(42,118,255,.25), transparent 60%),
                radial-gradient(900px 600px at 70% 55%, rgba(40,198,178,.22), transparent 60%),
                linear-gradient(180deg,var(--bg0),var(--bg1));
    min-height:100vh;}
  .wrap{max-width:980px;margin:0 auto;padding:16px}
  .card{background:var(--card);border:1px solid var(--stroke);border-radius:var(--r);padding:16px;margin-bottom:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.28);backdrop-filter: blur(10px);}
  h1{margin:0 0 6px 0;font-size:22px}
  h2{margin:18px 0 8px 0;font-size:16px}
  .muted{color:var(--muted)}
  code{background:rgba(0,0,0,.25);padding:2px 6px;border-radius:8px}
  pre{background:rgba(0,0,0,.25);padding:12px;border-radius:14px;overflow:auto;border:1px solid rgba(255,255,255,.10)}
  .kv{display:grid;grid-template-columns:220px 1fr;gap:8px 12px}
  @media (max-width:720px){.kv{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Datenschutz</h1>
    <div class="muted">Diese Seite lädt die Meta-Infos live aus dem Worker.</div>
    <div class="muted" style="margin-top:6px">Worker: <code id="w"></code></div>
  </div>

  <div class="card" id="metaCard">
    <h2>Meta</h2>
    <div class="kv">
      <div class="muted">Build</div><div id="build">—</div>
      <div class="muted">Aufbewahrung (Tage)</div><div id="ret">—</div>
      <div class="muted">Löschgrenze (alles davor wird gelöscht)</div><div id="delBefore">—</div>
      <div class="muted">Nächster Löschlauf spätestens</div><div id="delAt">—</div>
      <div class="muted">Patientensprecher</div><div id="ps">—</div>
      <div class="muted">Datenarten</div><div id="types">—</div>
    </div>
    
<script>
(async function(){
  try{
    const r = await fetch((location.origin.replace(/\/$/,"")) + "/api/privacy/meta", { method:"GET" });
    const j = await r.json();
    if(j && j.ok){
      if(document.getElementById("psName")) document.getElementById("psName").textContent = j.psName || "—";
      if(document.getElementById("psEmail")) document.getElementById("psEmail").textContent = j.psEmail || "—";
    }
  }catch(e){}
})();
</script>

</body>
</html>
